<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
<title>ูุดุงู ู ุนูุงู โ ููุชุดู ุจุนุถ</title>
<link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;500;700;800;900&family=Amiri:wght@400;700&display=swap" rel="stylesheet">
<!-- Firebase Realtime Database (for shared state across all users) -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
<style>
:root {
  --rose-deep: #8B0000;
  --rose-red: #C2185B;
  --rose-mid: #E91E63;
  --rose-pink: #F48FB1;
  --rose-blush: #FCE4EC;
  --rose-cream: #FFF5F7;
  --gold: #D4A574;
  --gold-light: #E8C9A0;
  --bg-dark: #1A0A10;
  --bg-card: #FFF9FA;
  --text-dark: #3D0A1E;
  --text-mid: #7A2E50;
  --text-light: #B05A7A;
  
  --level1: #E8A87C;
  --level1-glow: rgba(232,168,124,0.3);
  --level2: #D4726A;
  --level2-glow: rgba(212,114,106,0.3);
  --level3: #8B5E83;
  --level3-glow: rgba(139,94,131,0.3);
  --level4: #6B2D4A;
  --level4-glow: rgba(107,45,74,0.3);
}

* { margin:0; padding:0; box-sizing:border-box; -webkit-tap-highlight-color:transparent; }

body {
  font-family: 'Tajawal', sans-serif;
  background: var(--bg-dark);
  min-height: 100vh;
  min-height: 100dvh;
  overflow-x: hidden;
  color: var(--text-dark);
}

/* ========== SCROLLBAR ========== */
::-webkit-scrollbar { width:6px; }
::-webkit-scrollbar-track { background:transparent; }
::-webkit-scrollbar-thumb { background:var(--rose-pink); border-radius:3px; }

/* ========== HERO ========== */
.hero {
  min-height:100vh; min-height:100dvh;
  display:flex; flex-direction:column; align-items:center; justify-content:center;
  text-align:center; padding:2rem; position:relative; overflow:hidden;
}
.hero::before {
  content:''; position:absolute; inset:0;
  background:
    radial-gradient(ellipse at 30% 40%, rgba(194,24,91,0.12) 0%, transparent 50%),
    radial-gradient(ellipse at 70% 60%, rgba(232,168,124,0.1) 0%, transparent 50%),
    radial-gradient(ellipse at 50% 90%, rgba(212,164,116,0.08) 0%, transparent 40%);
}
.hero-content { position:relative; z-index:2; }
.hero-names {
  font-family:'Amiri',serif; font-size:clamp(1rem,3vw,1.4rem);
  color:var(--gold); letter-spacing:3px; margin-bottom:0.5rem;
  animation:fadeUp 0.8s ease-out;
}
.hero h1 {
  font-family:'Amiri',serif; font-size:clamp(2.8rem,7vw,5rem);
  color:var(--rose-cream); margin-bottom:0.8rem;
  animation:fadeUp 0.8s ease-out 0.15s both;
  text-shadow: 0 0 40px rgba(194,24,91,0.3);
}
.hero-sub {
  font-size:clamp(0.95rem,2.5vw,1.2rem); color:rgba(255,245,247,0.6);
  max-width:520px; line-height:1.9; font-weight:300;
  animation:fadeUp 0.8s ease-out 0.3s both;
}
.hero-date {
  margin-top:1.2rem; font-family:'Amiri',serif;
  font-size:1.1rem; color:var(--gold-light); opacity:0.5;
  animation:fadeUp 0.8s ease-out 0.4s both;
}
.hero-date span { font-size:1.4rem; }
.start-btn {
  margin-top:2.5rem; padding:1rem 3.5rem;
  border:1.5px solid var(--gold); background:transparent;
  color:var(--gold); font-family:'Tajawal',sans-serif;
  font-size:1.1rem; font-weight:500; border-radius:50px;
  cursor:pointer; transition:all 0.4s ease; touch-action:manipulation;
  animation:fadeUp 0.8s ease-out 0.5s both;
}
.start-btn:hover {
  background:rgba(212,165,116,0.1); border-color:var(--gold-light);
  transform:translateY(-2px); box-shadow:0 8px 30px rgba(212,165,116,0.15);
}

/* ========== FLOATING PETALS ========== */
.petals-container { position:fixed; inset:0; pointer-events:none; z-index:0; overflow:hidden; }
.petal {
  position:absolute; font-size:1.2rem; opacity:0;
  animation: petalFall linear infinite;
}
@keyframes petalFall {
  0% { transform:translateY(-5vh) rotate(0deg); opacity:0; }
  10% { opacity:0.4; }
  90% { opacity:0.3; }
  100% { transform:translateY(105vh) rotate(360deg); opacity:0; }
}

/* ========== MAIN APP ========== */
.app { display:none; }
.app.visible { display:block; }

/* ========== TOP NAV ========== */
.top-nav {
  position:-webkit-sticky; position:sticky; top:0; z-index:100;
  background:linear-gradient(to bottom, var(--bg-dark) 70%, transparent);
  padding:1rem 0 1.5rem; text-align:center;
}
.top-nav-names {
  font-family:'Amiri',serif; font-size:0.85rem;
  color:var(--gold); opacity:0.6; margin-bottom:0.8rem;
}
.level-tabs {
  display:flex; justify-content:center; gap:0.4rem;
  padding:0 1rem; flex-wrap:wrap;
}
.level-tab {
  padding:0.5rem 1.2rem; border:none; border-radius:50px;
  font-family:'Tajawal',sans-serif; font-size:0.85rem; font-weight:500;
  cursor:pointer; transition:all 0.3s ease; touch-action:manipulation;
  color:rgba(255,245,247,0.4); background:rgba(255,245,247,0.04);
  position:relative;
}
.level-tab .tab-count {
  font-size:0.65rem; display:block; opacity:0.6; margin-top:1px;
}
.level-tab.active { color:#fff; }
.level-tab[data-level="1"].active { background:var(--level1); box-shadow:0 4px 20px var(--level1-glow); }
.level-tab[data-level="2"].active { background:var(--level2); box-shadow:0 4px 20px var(--level2-glow); }
.level-tab[data-level="3"].active { background:var(--level3); box-shadow:0 4px 20px var(--level3-glow); }
.level-tab[data-level="4"].active { background:var(--level4); box-shadow:0 4px 20px var(--level4-glow); }

/* ========== FILTER BAR ========== */
.filter-bar {
  display:flex; justify-content:center; gap:0.5rem;
  padding:0.5rem 1rem; flex-wrap:wrap; margin-bottom:0.5rem;
}
.filter-btn {
  padding:0.35rem 1rem; border:1px solid rgba(255,245,247,0.1);
  border-radius:50px; font-family:'Tajawal',sans-serif;
  font-size:0.75rem; font-weight:400; cursor:pointer;
  color:rgba(255,245,247,0.4); background:transparent;
  transition:all 0.3s ease; touch-action:manipulation;
}
.filter-btn.active {
  color:var(--rose-cream); background:rgba(255,245,247,0.1);
  border-color:rgba(255,245,247,0.25);
}
.filter-btn .count {
  display:inline-block; margin-right:4px;
  background:rgba(255,255,255,0.15); border-radius:50%;
  width:18px; height:18px; line-height:18px; text-align:center;
  font-size:0.65rem;
}

/* ========== CARD AREA ========== */
.card-area {
  max-width:480px; margin:0 auto;
  padding:0 1.2rem calc(6rem + env(safe-area-inset-bottom));
  position:relative;
}
.level-header {
  text-align:center; padding:1.5rem 0 1rem;
}
.level-header .lnum {
  font-size:0.8rem; color:rgba(255,245,247,0.3);
  letter-spacing:2px; font-weight:300;
}
.level-header h2 {
  font-family:'Amiri',serif; font-size:1.6rem;
  color:var(--rose-cream); margin:0.3rem 0;
}
.level-header .ldesc {
  font-size:0.85rem; color:rgba(255,245,247,0.4); font-weight:300;
}

/* ========== SINGLE CARD ========== */
.card-wrapper {
  perspective:1000px; margin-bottom:0;
  animation:cardSlideIn 0.4s ease-out both;
}
.card {
  background:var(--bg-card);
  border-radius:24px; overflow:hidden;
  box-shadow:0 8px 40px rgba(0,0,0,0.25);
  transition:transform 0.3s ease, box-shadow 0.3s ease;
  position:relative;
}
.card::before {
  content:''; position:absolute; top:0; right:0;
  width:5px; height:100%;
}
.card[data-level="1"]::before { background:var(--level1); }
.card[data-level="2"]::before { background:var(--level2); }
.card[data-level="3"]::before { background:var(--level3); }
.card[data-level="4"]::before { background:var(--level4); }

.card-top {
  padding:1.8rem 1.8rem 0;
  display:flex; justify-content:space-between; align-items:center;
}
.card-qnum {
  font-size:0.7rem; font-weight:700; letter-spacing:1px; opacity:0.3;
}
.card[data-level="1"] .card-qnum { color:var(--level1); }
.card[data-level="2"] .card-qnum { color:var(--level2); }
.card[data-level="3"] .card-qnum { color:var(--level3); }
.card[data-level="4"] .card-qnum { color:var(--level4); }

.card-status-badge {
  font-size:0.65rem; padding:0.2rem 0.6rem; border-radius:20px;
  font-weight:500; display:none;
}
.card-status-badge.show { display:inline-block; }
.badge-answered { background:#E8F5E9; color:#2E7D32; }
.badge-skipped { background:#FFF3E0; color:#E65100; }
.badge-refused { background:#FFEBEE; color:#C62828; }

.card-question {
  padding:1.2rem 1.8rem 1.5rem;
  font-family:'Amiri',serif; font-size:1.35rem;
  line-height:2.1; color:var(--text-dark);
  min-height:100px;
}

.card-actions {
  padding:0 1.5rem 1.5rem;
  display:flex; gap:0.5rem; flex-wrap:wrap;
}
.card-actions.done { justify-content:center; }

.action-btn {
  flex:1; min-width:0; padding:0.7rem 0.5rem;
  border:none; border-radius:14px;
  font-family:'Tajawal',sans-serif; font-size:0.8rem; font-weight:600;
  cursor:pointer; transition:all 0.25s ease; touch-action:manipulation;
  display:flex; align-items:center; justify-content:center; gap:0.3rem;
}
.action-btn:active { transform:scale(0.96); }

.btn-answered {
  background:linear-gradient(135deg,#43A047,#2E7D32);
  color:#fff; flex:2;
}
.btn-answered:hover { box-shadow:0 4px 15px rgba(46,125,50,0.4); }

.btn-skip {
  background:#FFF3E0; color:#E65100;
}
.btn-skip:hover { background:#FFE0B2; }

.btn-refuse {
  background:#FFEBEE; color:#C62828;
}
.btn-refuse:hover { background:#FFCDD2; }

.btn-undo {
  background:rgba(0,0,0,0.06); color:var(--text-mid);
  flex:1 1 100%;
}
.btn-undo:hover { background:rgba(0,0,0,0.1); }

/* ========== CARD STATES ========== */
.card.state-answered { opacity:0.7; }
.card.state-answered .card-question { opacity:0.6; }
.card.state-skipped { opacity:0.6; }
.card.state-refused { opacity:0.5; }
.card.state-refused .card-question { text-decoration:line-through; opacity:0.4; }

/* ========== PROGRESS BAR ========== */
.progress-section {
  max-width:480px; margin:0 auto; padding:0 1.2rem;
}
.progress-bar-bg {
  width:100%; height:6px; background:rgba(255,245,247,0.08);
  border-radius:3px; overflow:hidden; margin-bottom:0.3rem;
}
.progress-bar-fill {
  height:100%; border-radius:3px; transition:width 0.5s ease;
}
.progress-bar-fill[data-level="1"] { background:var(--level1); }
.progress-bar-fill[data-level="2"] { background:var(--level2); }
.progress-bar-fill[data-level="3"] { background:var(--level3); }
.progress-bar-fill[data-level="4"] { background:var(--level4); }

.progress-text {
  font-size:0.7rem; color:rgba(255,245,247,0.3);
  text-align:center; margin-bottom:1rem;
}

/* ========== CONFETTI OVERLAY ========== */
.confetti-overlay {
  position:fixed; inset:0; pointer-events:none; z-index:999;
}
.confetti-piece {
  position:absolute; width:8px; height:8px;
  border-radius:2px; opacity:0;
  animation:confettiFall 1.5s ease-out forwards;
}
@keyframes confettiFall {
  0% { transform:translateY(0) rotate(0deg) scale(1); opacity:1; }
  100% { transform:translateY(80vh) rotate(720deg) scale(0.3); opacity:0; }
}

/* ========== SOUND TOGGLE ========== */
.sound-toggle {
  position:fixed; bottom:calc(1.5rem + env(safe-area-inset-bottom)); left:1.5rem;
  width:44px; height:44px; border-radius:50%;
  background:rgba(255,245,247,0.08); border:1px solid rgba(255,245,247,0.1);
  color:var(--rose-cream); font-size:1.2rem;
  cursor:pointer; z-index:200; display:flex;
  align-items:center; justify-content:center;
  transition:all 0.3s ease;
  -webkit-backdrop-filter:blur(8px); backdrop-filter:blur(8px);
  touch-action:manipulation;
}
.sound-toggle:hover { background:rgba(255,245,247,0.15); }
.sound-toggle.muted { opacity:0.4; }

/* ========== BACK BUTTON ========== */
.back-btn {
  position:fixed; bottom:calc(1.5rem + env(safe-area-inset-bottom)); right:1.5rem;
  padding:0.6rem 1.5rem; border-radius:50px;
  background:rgba(255,245,247,0.08); border:1px solid rgba(255,245,247,0.1);
  color:var(--rose-cream); font-family:'Tajawal',sans-serif;
  font-size:0.85rem; cursor:pointer; z-index:200;
  transition:all 0.3s ease;
  -webkit-backdrop-filter:blur(8px); backdrop-filter:blur(8px);
  touch-action:manipulation; display:none;
}
.back-btn.visible { display:block; }
.back-btn:hover { background:rgba(255,245,247,0.15); }

/* ========== EMPTY STATE ========== */
.empty-state {
  text-align:center; padding:3rem 1rem;
  color:rgba(255,245,247,0.3); font-size:0.95rem;
}
.empty-state .emoji { font-size:2.5rem; margin-bottom:1rem; }

/* ========== ANIMATIONS ========== */
@keyframes fadeUp {
  from { opacity:0; transform:translateY(20px); }
  to { opacity:1; transform:translateY(0); }
}
@keyframes cardSlideIn {
  from { opacity:0; transform:translateY(20px); }
  to { opacity:1; transform:translateY(0); }
}
@keyframes pulse {
  0%,100% { transform:scale(1); }
  50% { transform:scale(1.05); }
}
@keyframes shimmer {
  0% { background-position:-200% 0; }
  100% { background-position:200% 0; }
}

/* ========== RESPONSIVE ========== */
@media(max-width:480px) {
  .card-question { font-size:1.15rem; padding:1rem 1.4rem 1.2rem; }
  .card-actions { padding:0 1.2rem 1.2rem; }
  .level-tabs { gap:0.3rem; }
  .level-tab { padding:0.4rem 0.8rem; font-size:0.78rem; }
}
</style>
</head>
<body>

<!-- PETALS BACKGROUND -->
<div class="petals-container" id="petals"></div>

<!-- CONFETTI OVERLAY -->
<div class="confetti-overlay" id="confetti"></div>

<!-- ========== HERO ========== -->
<div class="hero" id="hero">
  <div class="hero-content">
    <div class="hero-names">ูุดุงู ู ุนูุงู</div>
    <h1>ููุชุดู ุจุนุถ ุฃูุชุฑ</h1>
    <p class="hero-sub">
      ูขูู+ ุณุคุงู ูุนูููุฉ ุจุญุฑููุฉ ุนุดุงู ููุชุญ ููุงู ุญูููู ูุตุงุฏู ุจููุง.
      <br>ูค ูุณุชููุงุช โ ูู ุงูุชูุงุตูู ุงูุตุบูุฑุฉ ูุญุฏ ุงูุนููู ูุงูููู.
    </p>
    <div class="hero-date">๐น <span>ูขูฃ.ููก</span> ๐น</div>
    <button class="start-btn" onclick="startGame()">ููุง ูุจุฏุฃ ูุน ุจุนุถ</button>
  </div>
</div>

<!-- ========== MAIN APP ========== -->
<div class="app" id="app">
  <!-- TOP NAV -->
  <div class="top-nav">
    <div class="top-nav-names">๐น ูุดุงู ู ุนูุงู ๐น</div>
    <div class="level-tabs" id="levelTabs"></div>
  </div>

  <!-- FILTER BAR -->
  <div class="filter-bar" id="filterBar"></div>

  <!-- PROGRESS -->
  <div class="progress-section" id="progressSection">
    <div class="progress-bar-bg">
      <div class="progress-bar-fill" id="progressFill" data-level="1" style="width:0%"></div>
    </div>
    <div class="progress-text" id="progressText"></div>
  </div>

  <!-- CARDS -->
  <div class="card-area" id="cardArea"></div>
</div>

<!-- SOUND TOGGLE -->
<button class="sound-toggle" id="soundToggle" onclick="toggleSound()" style="display:none">๐</button>

<!-- BACK BUTTON -->
<button class="back-btn" id="backBtn" onclick="goHome()">โ ุงูุจุฏุงูุฉ</button>

<script>
// ========== QUESTION DATA ==========
const questions = {
  1: {
    title: "ูุชุนุฑู ุนูู ุจุนุถ ุฃูุชุฑ",
    desc: "ุฃุณุฆูุฉ ุฎูููุฉ ูุฏู ...",
    items: [
      "ุฅูู ุฃูุชุฑ ุญุงุฌุฉ ุจุชูุฑุญู ูู ูููู ุงูุนุงุฏู ููุญุฏุด ูุงุฎุฏ ุจุงูู ูููุงุ",
      "ูู ูุฏุฑุช ุชุนูุด ูู ุฃู ููุงู ูู ุงูุนุงูู ุณูุฉ ูุงููุฉุ ูุชุฎุชุงุฑ ููู ููููุ",
      "ุฅูู ุงูุฃุบููุฉ ุงููู ูู ุณูุนุชูุง ุฏูููุชู ููุฏู ููุชุญุณู ููุฑุงูุ",
      "ุฅูู ุฃุญูู ุฐูุฑู ูู ุทูููุชู ูุณู ูุงูุฑูุง ุจุงูุชูุตููุ",
      "ุฅูู ุงูุฃููุฉ ุงููู ูู ุญุฏ ุนูููุงูู ูุชุญุณ ุฅูู ูุงูููุ",
      "ุจุชุญุจ ุชูุถู ุฅุฌุงุฒุชู ุฅุฒุงู ูู ูููุด ุฃู ุงูุชุฒุงูุงุชุ",
      "ุฅูู ุฃูุชุฑ ุนุงุฏุฉ ุนูุฏู ุงููุงุณ ุจุชุณุชุบุฑุจูุง ุจุณ ุฃูุช ุจุชุญุจูุงุ",
      "ูู ูุงุฒู ุชุฎุชุงุฑ ููุงูุฉ ุฌุฏูุฏุฉ ุชุชุนูููุง ุจูุฑูุ ูุชุฎุชุงุฑ ุฅููุ",
      "ุฅูู ุฃูุชุฑ ูููู ุฃู ูุณูุณู ุฃุซูุฑ ููู ุจุฌุฏุ",
      "ุจุชุญุจ ุงูุตุจุญ ููุง ุงูููู ุฃูุชุฑุ ููููุ",
      "ุฅูู ุฃูุชุฑ ุญุงุฌุฉ ุจุชุนูููุง ููุง ุชููู ูุจุณูุทุ",
      "ูู ุนูุฏู ุณูุจุฑ ุจุงูุฑ ูุงุญุฏุฉุ ูุชุฎุชุงุฑ ุฅููุ",
      "ุฅูู ุฃูุชุฑ ููุงู ุฒุฑุชู ูุญุจูุชู ูู ุญูุงุชูุ",
      "ุจุชูุถู ุชุงูู ุฅูู ููุง ุชููู ุฒุนูุงูุ",
      "ุฅูู ุฃูู ุญุงุฌุฉ ุจุชุนูููุง ููุง ุชุตุญู ุงูุตุจุญุ",
      "ุฅูู ุฃูุชุฑ ูุชุงุจ ุฃู ุจูุฏูุงุณุช ุฃุซูุฑ ูููุ",
      "ูู ุชูุฏุฑ ุชุฑุฌุน ูุฃู ุฒูู ูู ุงูุชุงุฑูุฎ ููู ูุงุญุฏุ ูุชุฎุชุงุฑ ุฃููู ูููุ",
      "ุฅูู ุฃูุชุฑ ุญุงุฌุฉ ุจุชุถุญูู ุฏุงููุงู ูููุง ููุช ุฒุนูุงูุ",
      "ุจุชุญุจ ุงููุทุฑ ููุง ุงูุดูุณ ุฃูุชุฑุ",
      "ุฅูู ุขุฎุฑ ุญุงุฌุฉ ุฌุฏูุฏุฉ ุฌุฑุจุชูุง ูุญุจูุชูุงุ",
      "ูู ูุงู ุนูุฏู ูุทุนูุ ูุชุณููู ุฅูู ููููุฏู ุฅููุ",
      "ุฅูู ุฃูุชุฑ ููู ุจุชุญุจู ูุจููุซูู ุฅุฒุงูุ",
      "ุจุชุญุจ ุชุณุงูุฑ ููุฌุจุงู ููุง ุงูุจุญุฑ ุฃูุชุฑุ",
      "ุฅูู ุฃูุชุฑ ููุณู ูู ุงูุณูุฉ ุจุชุญุจูุ ููููุ",
      "ูู ูุทููุจ ููู ุชุทุจุฎ ูุญุฏ ูููุ ูุชุนูู ุฅููุ",
      "ุฅูู ุฃูุชุฑ ุฑูุงุถุฉ ุจุชุญุจ ุชุชูุฑุฌ ุนูููุง ุฃู ุชูุนุจูุงุ",
      "ุฅูู ุฃูุชุฑ ุชุทุจูู ุนูู ููุจุงููู ุจุชูุชุญู ุทูู ุงููููุ",
      "ูู ูููู ุชููู ุฃู ุญููุงู ููู ูุงุญุฏุ ูุชุฎุชุงุฑ ุฅููุ",
      "ุฅูู ุฃูุชุฑ ุญุงุฌุฉ ุจุชุนูููุง ูุฃูุช ูู ุงูุนุฑุจูุฉ ููุญุฏูุ",
      "ุจุชุญุจ ุงููููุฉ ููุง ุงูุดุงูุ ูุจุชุดุฑุจูุง ุฅุฒุงูุ",
      "ูู ุจุชูุตู ููุณู ุจุชูุงุช ูููุงุชุ ููุจููุง ุฅููุ",
      "ุฅูู ุฃูุชุฑ ุญูู ููุชู ููุณู ูุงูุฑูุ",
      "ุจุชุญุจ ุชุชูุฑุฌ ุนูู ุฅูู ุนูู ููุชููุจ ููุง ุชููู ูุงุถูุ",
      "ุฅูู ุฃูุชุฑ ููู ูู ุงูุฃุณุจูุน ุจุชุญุจูุ ููููุ",
      "ูู ูุงู ุนูุฏู ููู ุฅุฌุงุฒุฉ ูุซุงููุ ููุจูู ุดููู ุฅูู ูู ุงูุตุจุญ ูููููุ",
      "ุฅูู ุฃูุชุฑ ูุฏูุฉ ุงุชุจุณุทุช ุจููุง ูู ุญูุงุชูุ",
      "ุจุชุญุจ ุชุณูุน ูุฒููุง ููุง ุจูุฏูุงุณุช ูุฃูุช ูุงุดูุ",
      "ุฅูู ุฃูุชุฑ ุญุงุฌุฉ ุจุชุนูููุง ุนุดุงู ุชูุงูุฆ ููุณูุ",
      "ูู ุนูุฏู ูููุณ ูุงููุงุด ุญุฏูุฏ ูููู ูุงุญุฏ ุจุณุ ูุชุนูู ุฅููุ",
      "ุฅูู ุงูุญุงุฌุฉ ุงููู ูู ุญุฏ ุนูููุง ูุฏุงูู ูุชุญุชุฑูู ููุฑุงูุ",
      "ุจุชุญุจ ุชูุนุฏ ููุญุฏู ููุง ูุน ูุงุณ ุฃูุชุฑุ",
      "ุฅูู ุฃูุชุฑ ููุชุฉ ุฃู ูููู ููููุฏู ูุงูุฑู ูุญุฏ ุฏูููุชูุ",
      "ุฅูู ุฃูุชุฑ ุญุงุฌุฉ ุจุชุญุจ ุชุดุชุฑููุง ูููุณูุ",
      "ูู ุณุงูุฑูุง ูุน ุจุนุถุ ุฃูุช ููุนู ุฅูู โ ูุฎุทุท ููุง ุนูููุ",
      "ุฅูู ุฃูุชุฑ ุญุงุฌุฉ ุจุชุนูููุง ูุจู ูุง ุชูุงูุ",
      "ุจุชุญุจ ุงูุฃูู ุงูุญุงุฑ ููุง ูุฃุ ูุญุฏ ุฃู ุฏุฑุฌุฉุ",
      "ุฅูู ุฃูุชุฑ ุดุฎุตูุฉ ูุฑุชูู ููุช ุจุชุญุจูุง ูุฃูุช ุตุบูุฑุ",
      "ูู ูููู ุชุชุนูู ูุบุฉ ุฌุฏูุฏุฉ ุจูู ููู ูููููุ ูุชุฎุชุงุฑ ุฃููู ูุบุฉุ",
      "ุฅูู ุฃุญูู ุญุงุฌุฉ ุญุตูุชูู ุงูุฃุณุจูุน ุฏูุ",
      "ุฅูู ุฃูุชุฑ ุญุงุฌุฉ ุจุชุญุจูุง ูู ุดุบูู ุฃู ุฏุฑุงุณุชูุ",
      "ุฅูู ุฃูุชุฑ ุณูุฑุฉ ูู ุงููุฑุขู ุจุชุญุจ ุชุณูุนูุง ูุจุชุฃุซุฑ ูููุ",
      "ุจุชุญุจ ุชูุฑุฃ ูุฑุขู ุจุตูุช ููู ุฃูุชุฑุ",
      "ุฅูู ุฃุญูู ุฐูุฑู ููู ูู ุฑูุถุงู ูู ูุฃูุช ุตุบูุฑุ",
      "ุฅูู ุฃูุชุฑ ุฏุนุงุก ุจุชุฏุนูู ูู ูููุ",
      "ุฅูู ุฃูุชุฑ ุญุงุฌุฉ ุจุชุญุจูุง ูู ุตูุงุฉ ุงููุฌุฑุ",
      "ุฅูู ุฃูุชุฑ ุญุงุฌุฉ ุจุชุญุจูุง ูู ุฃุฌูุงุก ุฑูุถุงู โ ุงูุณุญูุฑ ููุง ุงููุทุงุฑ ููุง ุงูุชุฑุงููุญุ",
      "ุฅูู ุฃูุชุฑ ูุณุฌุฏ ุตููุช ููู ูุญุณูุช ุจุงูุฑุงุญุฉุ",
      "ุจุชุญุจ ุชุฎุชู ุงููุฑุขู ูู ุฑูุถุงู ููุง ุนูู ูุฏุงุฑ ุงูุณูุฉุ",
      "ุฅูู ุฃูุชุฑ ุญุฏูุซ ูุจูู ุจุชุญุจู ูุจูุฃุซุฑ ูููุ"
    ]
  },
  2: {
    title: "ููุฑูุจ ุฃูุชุฑ",
    desc: "ุฃุณุฆูุฉ ุชุฎูููุง ูุดูู ุฌูุงูุจ ุฌุฏูุฏุฉ ูู ุจุนุถ",
    items: [
      "ุฅูู ุงูุญุงุฌุฉ ุงููู ุจุชุฎุงู ุงููุงุณ ุชุญูู ุนููู ุจุณุจุจูุงุ",
      "ููู ุงูุดุฎุต ุงููู ุฃุซูุฑ ููู ุฃูุชุฑ ูู ุฃู ุญุฏ ุชุงูู ูู ุญูุงุชูุ",
      "ุฅูู ุฃูุชุฑ ูููู ุญุณูุช ููู ุฅูู ุดุฌุงุน ุจุฌุฏุ",
      "ูู ุชูุฏุฑ ุชุบููุฑ ุญุงุฌุฉ ูุงุญุฏุฉ ูู ุทุฑููุฉ ุชุฑุจูุชูุ ูุชุบููุฑ ุฅููุ",
      "ุฅูู ุงููู ุจูุฎููู ุชุซู ูู ุญุฏ ุจุณุฑุนุฉ ูุฅูู ุงููู ุจูุฎููู ุชุชุฑุฏุฏุ",
      "ุฅูุชู ุขุฎุฑ ูุฑุฉ ุจููุช ููุงู ุงูุณุจุจ ุฅููุ",
      "ุฅูู ุงููููุจููููุช ุงููู ุญุฏ ูุงููููู ููุถู ูู ุจุงูู ูุญุฏ ุฏูููุชูุ",
      "ุจุชุนุจูุฑ ุนู ุญุจู ุฅุฒุงูุ ูุจุชุญุจ ุงูุชุงูู ูุนุจูุฑูู ุฅุฒุงูุ",
      "ุฅูู ุฃูุชุฑ ุญุงุฌุฉ ุจุชุญุณุณู ุจุงูุฃูุงูุ",
      "ุฅูู ุงููู ุจูุถุงููู ุจุณ ุจุชุณุชุญููู ุนุดุงู ูุง ุชุฒุนูุด ุญุฏุ",
      "ุฅูู ุฃูุชุฑ ูููู ุงุชุญุฑุฌุช ููู ูู ุญูุงุชูุ",
      "ูู ุญุฏ ุณุฃูู 'ุฅูุช ูุจุณูุทุ' ุฏูููุชูุ ูุชููู ุฅูู ุจุตุฑุงุญุฉุ",
      "ุฅูู ุฃูุชุฑ ุญุงุฌุฉ ุจุชุญุจูุง ูู ููุณูุ",
      "ุฅูู ุฃูุชุฑ ุญุงุฌุฉ ุนุงูุฒ ุชุบููุฑูุง ูู ููุณูุ",
      "ุจุชุบูุฑ ุนูู ุญุฏ ุจุณุฑุนุฉ ููุง ุตุนุจ ุชุบูุฑุ",
      "ุฅูู ุฃูุชุฑ ูููู ุงุชุฎุฐูุช ููู ูู ุญุฏ ููุช ูุงุซู ูููุ",
      "ุฅูู ุงููู ุจูุฎููู ูู ุงููุณุชูุจู ุฃูุชุฑ ุญุงุฌุฉุ",
      "ุฅูู ุฃูุชุฑ ูุตูุญุฉ ุญุฏ ูุงููุงูู ูุบููุฑุช ุญุงุฌุฉ ูู ุญูุงุชูุ",
      "ุจุชุญุจ ูุจูู ุนูุฏู ุฃุตุญุงุจ ูุชูุฑ ููุง ูุงุญุฏ ุฃู ุงุชููู ูุฑูุจูู ูููุ",
      "ุฅูู ุฃูุชุฑ ูุฑุฉ ุญุณูุช ูููุง ุฅูู ูุญุชุงุฌ ุญุฏ ุฌูุจู ูููุงูุด ูู ุญุฏุ",
      "ูู ุญุตูู ูููู ูุญุดุ ุจุชุฑูุญ ูููู ุงูุฃููุ",
      "ุฅูู ุงูุญุงุฌุฉ ุงููู ุจุชุญุจ ุชุนูููุง ุจุณ ูุด ุจุชููู ูุญุฏ ุนูููุงุ",
      "ุฅุฒุงู ุจุชุชุนุงูู ููุง ุญุฏ ูุฒุนูู โ ุจุชูููู ููุง ุจุชุณูุชุ",
      "ุฅูู ุฃูุชุฑ ุญุงุฌุฉ ุงุชุนููุชูุง ุนู ููุณู ุงูุณูุฉ ุงููู ูุงุชุชุ",
      "ุฅูู ุงูุญุงุฌุฉ ุงููู ุจุชุญุณุณู ุฅูู ูุฎุชูู ุนู ุงููุงุณ ุญูุงูููุ",
      "ุจุชููุฑ ูู ุงููุงุถู ูุชูุฑ ููุง ุจุชุญุงูู ุชูุณูุ",
      "ุฅูู ุฃูุชุฑ ููู ูู ุญูุงุชู ุญุณูุช ููู ุจุงููุฎุฑ ุจููุณูุ",
      "ูู ุชูุฏุฑ ุชููู ูุฃู ุญุฏ ูู ุญูุงุชู ุญุงุฌุฉ ูู ุบูุฑ ูุง ูุชุฒุนูุ ูุชููู ุฅูู ูููููุ",
      "ุฅูู ุงูุญุงุฌุฉ ุงููู ุงููุงุณ ุจุชูุชูุฑูุง ุนูู ุจุณ ูู ูุด ุจุชูุซูู ูุนูุงูุ",
      "ุฅูู ุฃูุชุฑ ุญุงุฌุฉ ุจุชุชููุงูุง ุฏูููุชูุ",
      "ุจุชุญุณ ุฅูู ุจุชุงุฎุฏ ูุชูุฑ ููุง ุจุชุฏู ูุชูุฑ ูู ุงูุนูุงูุงุชุ",
      "ุฅูู ุงููู ุจูุฎููู ุชุญุณ ุฅูู ูุญุจูุจ ูุนูุงูุ",
      "ูู ุชูุฏุฑ ุชุฑุฌุน ุชุชููู ูุน ุญุฏ ูุด ููุฌูุฏ ูู ุญูุงุชู ุฏูููุชูุ ููู ููููู ููุชูููู ุฅููุ",
      "ุฅูู ุงูููุถูุน ุงููู ูู ุญุฏ ูุชุญู ูุนุงู ูุชูุถู ุชุชููู ููู ุณุงุนุงุชุ",
      "ุจุชุญุจ ูุจูู ูู ุญุฏ ูุณุฃูู ุนู ูููู ููุง ุจุชุญุจ ุชููู ููุญุฏูุ",
      "ุฅูู ุฃูุชุฑ ููุช ูู ุงูููู ุจุชุญุณ ููู ุจุงููุญุฏุฉุ",
      "ุฅูู ุงูุญุงุฌุฉ ุงููู ุนููุชูุง ุนุดุงู ุญุฏ ุชุงูู ููุญุฏ ุฏูููุชู ูุจุณูุท ุฅูู ุนููุชูุงุ",
      "ุฅูู ุฃูุชุฑ ูููุฉ ุฃู ุฌููุฉ ุจุชุฃุซุฑ ูููุ",
      "ุจุชุญุจ ุงููุงุณ ุชูุงุฌุฆู ููุง ุชุนุฑูู ุงูุฎุทุฉ ูุจููุงุ",
      "ุฅูู ุฃูุชุฑ ุญุงุฌุฉ ูููู ุชุฎูู ูููู ูู ุฃุญูู ูุฃูุญุด ูู ุซุงููุฉุ",
      "ูู ุญุจูุช ุชูุชุจ ุฑุณุงูุฉ ูููุณู ุจุนุฏ ูกู ุณูููุ ูุชููู ูููุง ุฅููุ",
      "ุฅูู ุฃูุชุฑ ุทุฑููุฉ ุจุชุญุจ ุญุฏ ูุนุชุฐุฑูู ุจููุง ูู ุบูุท ูููุ",
      "ุจุชุญุจ ุงูููุณุงุช ุงูุตุบูุฑุฉ ูู ุงูุนูุงูุฉ ููุง ุงูุฃูุนุงู ุงููุจูุฑุฉุ",
      "ุฅูู ุงูุญุงุฌุฉ ุงููู ุจุชุนูููุง ููุง ูุด ุนุงุฑู ุชูุงู ุจุงููููุ",
      "ุฅูู ุฃูุชุฑ ูุฑุฉ ุญุณูุช ุฅู ุฑุจูุง ุจุนุชูู ุญุงุฌุฉ ูู ููุชูุง ุจุงูุธุจุทุ",
      "ูู ุจุชุฎุชุงุฑ ุจูู ุงูุฑุงุญุฉ ูุงููุบุงูุฑุฉุ ูุชุฎุชุงุฑ ุฅููุ",
      "ุฅูู ุฃูุชุฑ ุญุงุฌุฉ ุจุชุญุจูุง ูู ุนูุงูุชู ุจุฃูููุ",
      "ุฅูู ุฃูุชุฑ ุญุงุฌุฉ ูุงูุตุงู ูู ุนูุงูุชู ุจุฃูููุ",
      "ุจุชุชุนุงูู ูุน ุงูุถุบุท ุฅุฒุงู โ ุจุชูุนุฒู ููุง ุจุชุชููู ููุง ุจุชุดุชุบู ุฃูุชุฑุ",
      "ุฅูู ุฃูุชุฑ ุญูู ูุงู ุนูุฏู ูุฃูุช ุตุบูุฑ ูุณู ุจุชููุฑ ูููุ",
      "ุฅูู ุฃูุชุฑ ูููู ุญุณูุช ููู ุฅู ุฑุจูุง ูุฑูุจ ููู ุฃููุ",
      "ุฅูู ุฃูุชุฑ ุนุจุงุฏุฉ ุจุชุญุณุณู ุจุงูุฑุงุญุฉ ุงูููุณูุฉ ุบูุฑ ุงูุตูุงุฉุ",
      "ุฅูู ุฃูุชุฑ ุญุงุฌุฉ ุงุชุนููุชูุง ูู ุณูุฑุฉ ุงููุจู ๏ทบ ูุฃุซุฑุช ูู ุดุฎุตูุชูุ",
      "ุจุชุญุณ ุฅูู ูุฑูุจ ูู ุฑุจูุง ุฏูููุชู ููุง ูุญุชุงุฌ ุชุฑุฌุน ุฃูุชุฑุ",
      "ุฅูู ุฃูุชุฑ ุขูุฉ ูุฑุขููุฉ ุจุชุญุณ ุฅููุง ุจุชูููู ุฃูุช ุดุฎุตูุงูุ",
      "ุฅูู ุฃูุชุฑ ูููู ูู ุญูุงุฉ ุงูุตุญุงุจุฉ ุจูููููุ",
      "ุจุชุญุจ ุชุฏุนู ููุญุฏู ููุง ูู ุฌูุงุนุฉ ุฃูุชุฑุ",
      "ุฅูู ุฃูุชุฑ ุญุงุฌุฉ ุจุชุฎููู ุชุญุณ ุจุงูุณูููุฉ ููุง ุชููู ูููุงูุ",
      "ูู ุฌุฑุจุช ูุจู ูุฏู ุชููู ููุงู ูููุ ูุญุณูุช ุจุฅููุ"
    ]
  },
  3: {
    title: "ูุฏุฎู ุฃุนูู",
    desc: "ุฃุณุฆูุฉ ูุญุชุงุฌุฉ ุตุฑุงุญุฉ ูุซูุฉ ุจููุง",
    items: [
      "ุฅูู ุฃูุจุฑ ุฎูู ุนูุฏู ูู ุงูุนูุงูุงุช ุนูููุงูุ",
      "ุฅูู ุงูุญุงุฌุฉ ุงููู ูู ุญุฏ ุนูููุง ูุชุญุณ ุฅูู ุฎุงูู ุญุชู ูู ูุด ุฎูุงูุฉ ุชูููุฏูุฉุ",
      "ุฅูู ุฃุตุนุจ ูุฑุงุฑ ุฎุฏุชู ูู ุญูุงุชู ููุณู ุจุชููุฑ ููู ูุญุฏ ุงูููุงุฑุฏูุ",
      "ูู ุชูุฏุฑ ุชููู ูููุณู ุญุงุฌุฉ ูุฃูุช ุตุบูุฑุ ูุชููููุง ุฅููุ",
      "ุฅูู ุงูุญุงุฌุฉ ุงููู ุจุชุญุณุณู ุจุนุฏู ุงูุฃูุงู ูู ููุณู ููุด ุจุชููููุง ูุญุฏุ",
      "ุฅุฒุงู ุจุชุชุนุงูู ูุน ุงูุฎูุงูุ ุจุชูุงุฌู ููุง ุจุชุณูุช ููุง ุจุชูุดูุ",
      "ุฅูู ุฃูุชุฑ ุญุงุฌุฉ ุจุชูุฏู ุนูููุง ูู ุนูุงูุฉ ูุฏููุฉุ",
      "ุฅูู ุฃูุชุฑ ุฌุฑุญ ููุณู ูุณู ุจูุฃุซุฑ ููู ูุญุฏ ุฏูููุชูุ",
      "ุจุชุฎุงู ูู ุงูุงุฑุชุจุงุท ููุง ุจุชุฎุงู ูู ุงููุญุฏุฉ ุฃูุชุฑุ",
      "ุฅูู ุงูุญุงุฌุฉ ุงููู ูู ุญุฏ ุนุฑููุง ุนูู ูููู ูุบููุฑ ุฑุฃูู ูููุ",
      "ุฅูู ุฃูุชุฑ ูุฐุจุฉ ููุชูุง ููุฏูุช ุนูููุงุ",
      "ุฅูู ุงูุญุงุฌุฉ ุงููู ุจุชุญุณ ุฅูู ูุงุฒู ุชุนูููุง ุนุดุงู ุงููุงุณ ุชุญุจูุ",
      "ูู ุญุฏ ูุงูู 'ุฃูุง ูุด ููููุน ุฃููู ูุนุงู'ุ ุฃูู ุญุงุฌุฉ ูุชุญุณูุง ุฅููุ",
      "ุฅูู ุงูุญุงุฌุฉ ุงููู ุจุชุฎุจููุง ุนู ุงููุงุณ ุนุดุงู ูุง ูุญูููุด ุนูููุ",
      "ุฅูู ุฃูุชุฑ ุญุงุฌุฉ ุจุชุญุจูุง ููุง ูุฅูู ุฃูุชุฑ ุญุงุฌุฉ ุจุชุถุงููู ูููุ",
      "ุฅูู ุฃูุชุฑ ูุนุฏ ุงุชูุณุฑ ูุฃุซูุฑ ูููุ",
      "ุจุชุญุณ ุฅูู ุจุชุณุชุงูู ุงูุญุจ ุงููู ุจุชุงุฎุฏูุ ููู ุฃู ููู ูุฃุ",
      "ุฅูู ุฃูุชุฑ ุญุงุฌุฉ ุจุชุฎุงู ุชููููุงููุ",
      "ูู ุญุณูุช ุฅู ุญุจูุง ุจูููุ ูุชุนูู ุฅููุ",
      "ุฅูู ุงูุญุงุฌุฉ ุงููู ูุญุชุงุฌูุง ููู ููุด ุจุชุนุฑู ุชุทูุจูุงุ",
      "ุจุชุญุณ ุฅู ูู ุญุงุฌุฉ ูุงูุตุฉ ููู ููุง ูู ุญูุงุชู ุฏูููุชูุ",
      "ุฅูู ุฃุตุนุจ ูุชุฑุฉ ูุฑูุช ุจููุง ููุณูุงูุ",
      "ุจุชุญุณ ุฅูู ุจุชุนุทู ุฃูุชุฑ ููุง ุจุชุงุฎุฏ ูู ุญูุงุชู ุนูููุงูุ",
      "ุฅูู ุงูุญุงุฌุฉ ุงููู ูู ุฎุณุฑุชูุง ุฏูููุชู ูุชููุงุฑุ",
      "ุฅูู ุฃูุชุฑ ุญุงุฌุฉ ุจุชุฎุงู ูููุง ูู ุนูุงูุชูุง ุฅุญูุง ุจุงูุฐุงุชุ",
      "ุจุชูุงุฑู ููุณู ุจุญุฏ ุชุงููุ ููู ูููุฉุ",
      "ุฅูู ุงูุญุงุฌุฉ ุงููู ุนูุฑู ูุง ุณุงูุญุช ููุณู ุนูููุงุ",
      "ูู ุนุฑูุช ุฅูู ูุชููุช ุจูุฑูุ ูุชูููู ุฅูู ุงูููุงุฑุฏูุ",
      "ุฅูู ุฃูุชุฑ ุญุงุฌุฉ ุจุชุญุณุณู ุจุงูุฐูุจุ",
      "ุจุชุญุณ ุฅูู ุจุชูุจุช ูุดุงุนุฑู ููุง ุจุชุนุจูุฑ ุจุญุฑูุฉุ",
      "ุฅูู ุงูุญุงุฌุฉ ุงููู ูู ุบููุฑุชูุง ูู ููุณู ูุชุจูู ุฃุณุนุฏุ",
      "ุฅูู ุฃูุชุฑ ุญุงุฌุฉ ุจุชุญุณุณู ุจุงูุนุฌุฒุ",
      "ูู ุจููุง ูุดููุฉ ูุฃูุง ูุด ูุงุฎุฏุฉ ุจุงูู ุฅูู ุจุฌุฑุญูุ ุนุงูุฒูู ุฃุนูู ุฅููุ",
      "ุฅูู ุงููู ุจูุฎููู ุชุญุณ ุฅูู ููุญุฏู ุญุชู ูู ูู ูุงุณ ุญูุงูููุ",
      "ุจุชุฎุงู ูู ุงููุดู ููุง ูู ุงููุฌุงุญ ุฃูุชุฑุ",
      "ุฅูู ุฃูุชุฑ ูุฑุงุฑ ุฎุฏุชู ุจููุจู ูุด ุจุนููู ููุฏูุช ุนููู ุฃู ูุฃุ",
      "ุฅูู ุงูููุถูุน ุงููู ุจุชุชุฌูุจ ุชุชููู ููู ูุน ุฃู ุญุฏุ",
      "ุจุชุญุณ ุฅูู ุจุชูุซู ูุฏุงู ุงููุงุณ ููุง ุฃูุช ููุณู ุฏุงููุงูุ",
      "ุฅูู ุฃูุชุฑ ุญุงุฌุฉ ุจุชุฎุงู ุชุฎุณุฑูุง ูู ุญูุงุชูุ",
      "ูู ูุฏุฑุช ุชุดูู ุฐูุฑู ูุงุญุฏุฉ ูู ุฏูุงุบูุ ูุชุดูู ุฅููุ",
      "ุฅูู ุงููู ุจูุฎููู ุชููู ููุณู ููุชุชูููุด ููุง ุชููู ูุชุถุงููุ",
      "ุจุชุญุณ ุฅูู ูุญุชุงุฌ ูุณุงุนุฏุฉ ููุณูุฉ ููุด ุจุชุทูุจูุงุ",
      "ุฅูู ุฃูุชุฑ ูููู ุญุณูุช ููู ุฅูู ุถุนููุ",
      "ุฅูู ุงูุญุงุฌุฉ ุงููู ุจุชุนูููุง ุนุดุงู ุชูุฑุจ ูู ูุดุงุนุฑูุ",
      "ูู ูุงู ูู ุญุงุฌุฉ ูุงุญุฏุฉ ูููู ุชุตููุญ ุจููู ูุจูู ุญุฏุ ูุชุนูููุงุ",
      "ุฅูู ุฃูุชุฑ ูููุฉ ุญุฏ ูุงููุงูู ูุฌุฑุญุชู ูุญุฏ ุฏูููุชูุ",
      "ุจุชุณุงูุญ ุจุณูููุฉ ููุง ุจุชูุถู ูุงูุฑุ",
      "ุฅูู ุงูุญุงุฌุฉ ุงููู ุจุชุชููู ุฃููู ููููููุง ุนููุ",
      "ุฅูู ุฃูุชุฑ ูููู ุญุณูุช ููู ุจุงูุฎูุงูุฉ ูู ุญุฏ ูุฑูุจ ูููุ",
      "ูู ุจุชูุชุจ ุฑุณุงูุฉ ุตุฑุงุญุฉ ููุง ูู ุบูุฑ ุฎููุ ูุชููู ูููุง ุฅููุ",
      "ุฅูู ุฃูุชุฑ ุญุงุฌุฉ ุจุชุญุณุณู ุจุงูุฐูุจ ูู ุนูุงูุชู ูุน ุฑุจูุงุ",
      "ููู ููุช ุญุณูุช ุฅู ุฅููุงูู ุถุนู โ ุฅูู ุงููู ุฑุฌุนูุ",
      "ุจุชุฎุงู ูู ููู ุงูุญุณุงุจุ ูุฅูู ุฃูุชุฑ ุญุงุฌุฉ ุจุชููุฑ ูููุงุ",
      "ุฅูู ุงูุญุงุฌุฉ ุงููู ุจุชุชููู ุฑุจูุง ูุบูุฑูุงููุ",
      "ุจุชุญุณ ุฅูู ุจุชุนูู ุฐููุจ ูุจุชูุฑุฑูุง ููุด ูุงุฏุฑ ุชุจุทูุ ูุฅูู ุดุนูุฑู ุณุงุนุชูุงุ",
      "ุฅูู ุฃูุชุฑ ุญุงุฌุฉ ุจุชุญุณุณู ุฅูู ููุตุฑ ูู ุญู ุฑุจูุงุ",
      "ูู ููู ููุช ูู ุญูุงุชู ุญุณูุช ุฅู ุฑุจูุง ุจูุฎุชุจุฑู ุงุฎุชุจุงุฑ ุตุนุจุ ุฅูู ุงููู ุณุงุนุฏู ุชุนุฏูุ",
      "ุจุชุญุณ ุฅู ุงูุฏุนุงุก ุจูุชูุจู ููุง ุณุงุนุงุช ุจุชุดูุ ูุจุชุชุนุงูู ูุน ุงูุดู ุฏู ุฅุฒุงูุ",
      "ุฅูู ุฃูุชุฑ ุญุงุฌุฉ ุนุงูุฒ ุชุชูุจ ูููุง ูุชุจุฏุฃ ุตูุญุฉ ุฌุฏูุฏุฉ ูุน ุฑุจูุงุ"
    ]
  },
  4: {
    title: "ุงูุฌุฏ ุจุฌุฏ",
    desc: "ุฃุณุฆูุฉ ูููุฉ ุนุงูุดุงู ูุจูู ุญุงุฌุฉ ุญููููุฉ ูุน ุจุนุถ",
    items: [
      "ุฅูู ุชุนุฑููู ููุงูุชุฒุงู ูู ุนูุงูุฉุ ูุฅูู ุงููู ูุฎููู ุชุญุณ ุฅู ุงูุชุงูู ููุชุฒู ูุนุงู ูุนูุงูุ",
      "ูู ุญุตู ุจููุง ุฎูุงู ูุจูุฑุ ุฅูู ุงูุทุฑููุฉ ุงููู ุชุฎููู ุชุญุณ ุฅูู ุจุญุชุฑูู ุญุชู ูุฃูุง ุฒุนูุงูุฉุ",
      "ุฅูู ุงูุญุงุฌุงุช ุงููู ูุด ูุณุชุนุฏ ุชุชูุงุฒู ุนููุง ูููุง ุญุตู ูู ุฃู ุนูุงูุฉุ",
      "ุดุงูู ููุณู ููู ุจุนุฏ ูฅ ุณูููุ ูุนุงูุฒ ุงูุดุฎุต ุงููู ุฌูุจู ูููู ุฅุฒุงูุ",
      "ุฅูู ุงููู ุงุชุนููุชู ูู ุฃููู ุนู ุงูุญุจ โ ุณูุงุก ุญุงุฌุฉ ุญููุฉ ุฃู ุญุงุฌุฉ ุนุงูุฒ ุชุนูููุง ุบูุฑ ูุฏูุ",
      "ูู ุญุณูุช ุฅู ูู ุญุงุฌุฉ ุจุชุถุงููู ููู ุจุณ ุฎุงูู ุชููููุง โ ุฅูู ุงููู ูููู ูุณุงุนุฏู ุชุชูููุ",
      "ุฅูู ุฃูุชุฑ ุญุงุฌุฉ ูุญุชุงุฌูุง ูู ุดุฑูู ุญูุงุชู ุนุดุงู ุชุญุณ ุจุงูุฃูุงู ุงูุญููููุ",
      "ุฅุฒุงู ุดุงูู ุดูู ุจูุชูุง ูุน ุจุนุถุ ูุด ุจุณ ุงูููุงู โ ุงูุฌู ูุงูุทุฑููุฉุ",
      "ุฅูู ุฑุฃูู ูู ุงูุฃุฏูุงุฑ ูู ุงูุจูุช โ ููู ูุนูู ุฅูู ูููู ููุฑุฑ ุฅููุ",
      "ุนุงูุฒ ูุจูู ุนูุฏูุง ุนูุงู ุฅูุชูุ ูุนุงูุฒ ุชุฑุจููู ุฅุฒุงูุ",
      "ุฅูู ุฃูุชุฑ ุญุงุฌุฉ ุจุชุฎุงู ูููุง ููุง ุจุชููุฑ ูู ุงูุฌูุงุฒุ",
      "ูู ุญุตู ุฎูุงู ุจูู ุฃููู ูุจูููุ ูุชุชุตุฑู ุฅุฒุงูุ",
      "ูู ุญุตู ุฎูุงู ุจูู ุฃููู ูุจูููุ ูุชุชุตุฑู ุฅุฒุงูุ",
      "ุฅูู ุงููู ุจูุฎููู ุชุญุณ ุฅู ุนูุงูุชูุง ูุฎุชููุฉ ุนู ุฃู ุนูุงูุฉ ุชุงููุฉุ",
      "ุจุชุญุจ ูุชููู ูู ููู ููุง ูุญุชุงุฌ ูุณุงุญุชูุ ูุฅูู ุงูุชูุงุฒู ุงูููุงุณุจ ูููุ",
      "ุฅูู ุฑุฃูู ูู ุงููููุณ โ ููู ูุตุฑู ูููู ููููุฑ ูุฅุฒุงู ููุณููุ",
      "ุฅูู ุฃูุชุฑ ุญุงุฌุฉ ุจุชูููู ุนู ูุณุชูุจููุง ูุน ุจุนุถุ",
      "ูู ุฃูุง ุบูุทุช ูู ุญูู ุบูุทุฉ ูุจูุฑุฉ ุจุณ ูุฏูุงูุฉ ูุนูุงูุ ูุชุณุงูุญ ููุง ูู ุญุฏูุฏุ",
      "ุฅูู ุงููู ุจูุฎููู ุชุญุจ ุชูุถู ูุนุงูุงุ",
      "ุฅูู ุงููู ูููู ูุฎููู ุชูุฑุฑ ุชูุดู ูู ุนูุงูุฉุ",
      "ุจุชุญูู ุจุฅูู ูููุง ูุน ุจุนุถุ",
      "ุฅูู ุฃูู ูฃ ููู ุนุงูุฒูู ูููููุง ุฃุณุงุณ ุจูุชูุงุ",
      "ูู ูุฑูุช ุจููุช ุตุนุจ ูุงุฏูุงูุ ูุชุชุนุงูู ุฅุฒุงู ูุนุงูุฒูู ุฃุณุงุนุฏู ููุง ูุฃุ",
      "ุฅูู ุงูุญุงุฌุฉ ุงููู ุนุงูุฒูู ุฃุนุฑููุง ุนูู ูุจู ูุง ูุชุฌูุฒุ",
      "ูู ุญุณูุช ุฅู ุญุจูุง ุจูู ุฑูุชููุ ูุชุนูู ุฅูู ุนุดุงู ุชุฑุฌุนูุ",
      "ุฅูู ุฃูุชุฑ ุญุงุฌุฉ ุนุงูุฒ ูุนูููุง ุณูุง ูู ุฃูู ุณูุฉ ุฌูุงุฒุ",
      "ุฅูู ุงูุญุงุฌุฉ ุงููู ุดุงูู ุฅููุง ูููู ุชููู ุชุญุฏู ุจููุง ูู ุงููุณุชูุจูุ",
      "ุฅุฒุงู ุจุชุชุฎูู ุนูุฏ ุฌูุงุฒูุง ุงูุฃููุ",
      "ุฅูู ุงูุญุงุฌุฉ ุงููู ุจุชุชููุงูุง ููุฎุจููุง ุนู ูู ุงููุงุณ ุจุณ ุนุงูุฒ ุชููููุงููุ",
      "ุฅูู ุฑุฃูู ูู ุงูุนูุงูุฉ ูุน ุฃูู ุงูุทุฑู ุงูุชุงูู โ ุนุงูุฒูุง ุชููู ุฅุฒุงูุ",
      "ูู ุงูุญูุงุฉ ุจุนุฏ ุงูุฌูุงุฒ ุทูุนุช ูุฎุชููุฉ ุนู ุงููู ุฃูุช ูุชุฎูููุ ูุชุชุฃููู ุฅุฒุงูุ",
      "ุฅูู ุฃูุชุฑ ุญุงุฌุฉ ุจุชุญุณุณู ุจุงููุฎุฑ ูู ุนูุงูุชูุงุ",
      "ุฅูู ุฃูุชุฑ ุญุงุฌุฉ ุนุงูุฒ ุชุชุนูููุง ูููุ",
      "ูู ุจููุง ูุดููุฉ ููุด ูุงุฏุฑูู ูุญููุง ููุญุฏูุงุ ูุชููู ููุงูู ูุฑูุญ ูุญุฏ ูุณุงุนุฏูุงุ",
      "ุฅูู ุงููู ุจุชุชููุงู ููู ูุดุฑููุฉ ุญูุงุฉ ูุด ุจุณ ูุญุจูุจุฉุ",
      "ุฅุฒุงู ุนุงูุฒ ูุฑุจู ููุงุฏูุง ุฏูููุงูุ",
      "ุฅูู ุฃูุชุฑ ุญุงุฌุฉ ุจุชููู ูููุง ูุฃูุช ุจุชููุฑ ูู ุงููุณุคูููุฉุ",
      "ูู ุฌุงูู ูุฑุตุฉ ุดุบู ูู ุจูุฏ ุชุงููุฉุ ูุชุงุฎุฏูุงุ ูุนุงูุฒูู ุฃุนูู ุฅููุ",
      "ุฅูู ุงููู ุจุชุฏุนููู ุฑุจูุง ุจุงูููู ูููุง ูุน ุจุนุถุ",
      "ุฅูู ุงูุญุงุฌุฉ ุงููู ูู ุนููุชูุง ููู ูุฑุญูุง ูุชูุฑุญ ุจููุง ุฃููุ",
      "ุจุชุญุจ ูุตูู ูุน ุจุนุถ ููุง ูู ูุงุญุฏ ููุญุฏูุ",
      "ุฅูู ุฃูุชุฑ ุญุงุฌุฉ ุจุชุดูุฑ ุฑุจูุง ุนูููุง ูู ุนูุงูุชูุงุ",
      "ูู ุฌู ููู ุญุณููุง ุฅููุง ุจุนุฏูุง ุนู ุจุนุถุ ุฅูู ุฃูู ุฎุทูุฉ ูุชุงุฎุฏูุงุ",
      "ุฅูู ุงูุญุงุฌุฉ ุงููู ูุด ูุงุฏุฑ ุชููููุง ูุญุฏ ุบูุฑูุ",
      "ุฅูู ุฃูุชุฑ ุญุงุฌุฉ ุนุงูุฒ ุชุญูููุง ุนุดุงู ุชุญุณ ุฅูู ูุฌุญุช ูู ุงูุญูุงุฉุ",
      "ูู ุฑุจูุง ุณุฃูู 'ุนุงูุฒ ุฅูู ูุนูุงูุชููุ' ูุชูููู ุฅููุ",
      "ุฅูู ุฃูุชุฑ ุญุงุฌุฉ ุจุชุญุจูุง ููุง ููุด ุนุงูุฒูู ุฃุบููุฑูุง ุฃุจุฏุงูุ",
      "ุฅูู ุงูุญุงุฌุฉ ุงููู ุนุงูุฒ ููุนุฏ ุจุนุถ ุจููุง ูุจู ูุง ูุจุฏุฃ ุญูุงุชูุง ูุน ุจุนุถุ",
      "ูู ูุงุชุจ ุฑุณุงูุฉ ููุง ุฃูุชุญูุง ููู ูุฑุญูุงุ ูุชูุชุจ ูููุง ุฅููุ",
      "ุฅูู ุงููููุฉ ุงููู ูู ููุชูุงูู ูู ููู ูุชุฎูู ูููู ุฃุญููุ",
      "ุฅุฒุงู ุนุงูุฒ ุงูุฏูู ูููู ููุฌูุฏ ูู ุจูุชูุง ููู ุจููู โ ูุด ุจุณ ูู ุฑูุถุงูุ",
      "ุนุงูุฒ ูุฑุจู ููุงุฏูุง ุนูู ุฅูู ูู ุงูุฏูู ุงูุฃููุ ุฅูู ุฃูู ุญุงุฌุฉ ุนุงูุฒูู ูุชุนููููุงุ",
      "ุฅูู ุฃูุชุฑ ุญุงุฌุฉ ุจุชุฏุนููุง ูุนูุงูุชูุง ูู ุณุฌูุฏูุ",
      "ูู ุญุณููุง ุฅููุง ุจุนุฏูุง ุนู ุฑุจูุง ูุน ุจุนุถุ ุฅูู ุฃูู ุญุงุฌุฉ ููุนูููุงุ",
      "ุฅูู ุงูุขูุฉ ุฃู ุงูุญุฏูุซ ุงููู ุนุงูุฒู ูููู ุดุนุงุฑ ุจูุชูุงุ",
      "ุนุงูุฒ ูุญูุธ ูุฑุขู ูุน ุจุนุถุ ููุง ูุณูุน ุฏุฑูุณ ุฏูู ุณูุงุ ุฅูู ุงููู ููุงุณุจูุงุ",
      "ุฅูู ุฑุฃูู ูู ุงูุตุฏูุฉ โ ุนุงูุฒูุง ูุนูููุง ูุน ุจุนุถ ุฅุฒุงู ูุจุฃู ุดููุ",
      "ุจุชุญูู ูุนูู ุนูุฑุฉ ุฃู ุญุฌ ูุน ุจุนุถุ ูุนุงูุฒ ุงูุฑุญูุฉ ุฏู ุชุจูู ุดูููุง ุฅููุ",
      "ูู ูู ููู ุงุฎุชูููุง ุนูู ุญุงุฌุฉ ูู ุงูุฏูู โ ุญูู ุฃู ุฑุฃู ูููู โ ููุชุนุงูู ุฅุฒุงูุ",
      "ุฅูู ุงูุฏุนุงุก ุงููู ุนุงูุฒ ูุฏุนูู ุณูุง ูููุฉ ูุฑุญูุงุ",
      "ุนุงูุฒ ุชุจุฏุฃ ูููู ูุชุฎุชูู ุฅุฒุงู ูู ูุงุญูุฉ ุงูุฃุฐูุงุฑ ูุงูุนุจุงุฏุฉ โ ูุนุงูุฒูู ุฃุดุงุฑูู ููุง ูู ูุงุญุฏ ููุญุฏูุ",
      "ุฅูู ุฃูุชุฑ ุญุงุฌุฉ ุจุชุชููู ุฑุจูุง ูุฑุฒููุง ุจููุง ูู ุญูุงุชูุง ูุน ุจุนุถุ"
    ]
  }
};

// ========== FIREBASE CONFIG ==========
// 1. Go to https://console.firebase.google.com and create a project
// 2. Add a Realtime Database (Start in test mode for public read/write)
// 3. Replace ALL values below with your own project's config
// 4. That's it โ both users will see each other's changes in real time!
const FIREBASE_CONFIG = {
  apiKey: "AIzaSyCEVoEhxFDY4Nohq2aHuc_lYYEebcn1GwU",
  authDomain: "questions-game-b2798.firebaseapp.com",
  databaseURL: "https://questions-game-b2798-default-rtdb.europe-west1.firebasedatabase.app",
  projectId: "questions-game-b2798",
  storageBucket: "questions-game-b2798.firebasestorage.app",
  messagingSenderId: "30072085848",
  appId: "1:30072085848:web:ff3607e513f016b5ad592d"
};

// ========== STATE ==========
let currentLevel = 1;
let currentFilter = 'all';
let soundEnabled = true;
let audioCtx = null;

// Question states: 'new', 'answered', 'skipped', 'refused'
let questionStates = {};
let stateRef = null;  // Firebase database reference

// Make sure every question key exists (new questions added after first sync)
function ensureAllStatesExist() {
  for (let level = 1; level <= 4; level++) {
    for (let i = 0; i < questions[level].items.length; i++) {
      const key = `${level}-${i}`;
      if (!questionStates[key]) questionStates[key] = 'new';
    }
  }
}

// Initialize states from localStorage (instant), Firebase will override
function initStates() {
  // Default: all new
  for (let level = 1; level <= 4; level++) {
    for (let i = 0; i < questions[level].items.length; i++) {
      questionStates[`${level}-${i}`] = 'new';
    }
  }
  // Quick-load from localStorage so the UI is not empty on first paint
  try {
    const saved = localStorage.getItem('hesham_anan_game_v2');
    if (saved) questionStates = Object.assign(questionStates, JSON.parse(saved));
  } catch(e) {}
}

function saveStates() {
  // Persist locally as offline fallback
  try { localStorage.setItem('hesham_anan_game_v2', JSON.stringify(questionStates)); } catch(e) {}
  // Push to Firebase so the other user sees the change immediately
  if (stateRef) stateRef.set(questionStates).catch(() => {});
}

// ========== FIREBASE INIT ==========
function initFirebase() {
  const url = FIREBASE_CONFIG.databaseURL;
  if (!url || url.includes('YOUR_PROJECT')) return;

  try {
    firebase.initializeApp(FIREBASE_CONFIG);

    // Sign in silently (no UI, no user action needed)
    firebase.auth().signInAnonymously().catch(console.error);

    firebase.auth().onAuthStateChanged(user => {
      if (!user) return;

      stateRef = firebase.database().ref('game/states');

      stateRef.on('value', snapshot => {
        const remote = snapshot.val();
        if (!remote) return;
        if (JSON.stringify(remote) === JSON.stringify(questionStates)) return;

        questionStates = remote;
        ensureAllStatesExist();
        try { localStorage.setItem('hesham_anan_game_v2', JSON.stringify(questionStates)); } catch(e) {}
        if (document.getElementById('app').classList.contains('visible')) render();
      });
    });
  } catch(e) {
    console.error('Firebase init failed, running in local-only mode:', e);
  }
}


// ========== SOUND ENGINE (Web Audio API) ==========
function getAudioCtx() {
  try {
    if (!audioCtx) audioCtx = new (window.AudioContext || window.webkitAudioContext)();
  } catch(e) { return null; }
  return audioCtx;
}

// iOS / Safari audio unlock.
// MUST be called synchronously inside a user gesture handler (tap/click).
// Key rules:
//   1. ctx.resume() and the silent buffer BOTH fire synchronously โ
//      never inside a .then() โ because iOS closes the gesture window
//      before async promises resolve.
//   2. Do NOT disconnect the source node immediately; let it finish
//      naturally so iOS registers actual audio playback.
function iosAudioUnlock() {
  const ctx = getAudioCtx();
  if (!ctx) return;
  // Fire resume() synchronously (non-blocking)
  ctx.resume().catch(() => {});
  // Also play a silent 1-sample buffer synchronously in the same gesture tick
  try {
    const buf = ctx.createBuffer(1, 1, 22050);
    const src = ctx.createBufferSource();
    src.buffer = buf;
    src.connect(ctx.destination);
    src.start(0);
  } catch(e) {}
}

function playSound(type) {
  if (!soundEnabled) return;
  const ctx = getAudioCtx();
  if (!ctx) return;

  function _play() {
    try {
      // Use a small future offset (0.05 s) for ALL scheduled events.
      // Safari / iOS silently drops events scheduled at ctx.currentTime === 0,
      // and can misbehave when start time equals currentTime exactly.
      const t = ctx.currentTime + 0.05;

      if (type === 'answered') {
        [523.25, 659.25].forEach((freq, i) => {
          const osc = ctx.createOscillator();
          const gain = ctx.createGain();
          osc.connect(gain); gain.connect(ctx.destination);
          osc.type = 'sine';
          osc.frequency.value = freq;
          const s = t + i * 0.12;
          gain.gain.cancelScheduledValues(0);
          gain.gain.setValueAtTime(0.15, s);
          gain.gain.exponentialRampToValueAtTime(0.001, s + 0.5);
          osc.start(s); osc.stop(s + 0.5);
        });
      } else if (type === 'skip') {
        const osc = ctx.createOscillator();
        const gain = ctx.createGain();
        osc.connect(gain); gain.connect(ctx.destination);
        osc.type = 'triangle';
        osc.frequency.cancelScheduledValues(0);
        osc.frequency.setValueAtTime(400, t);
        osc.frequency.exponentialRampToValueAtTime(200, t + 0.2);
        gain.gain.cancelScheduledValues(0);
        gain.gain.setValueAtTime(0.08, t);
        gain.gain.exponentialRampToValueAtTime(0.001, t + 0.2);
        osc.start(t); osc.stop(t + 0.2);
      } else if (type === 'refuse') {
        const osc = ctx.createOscillator();
        const gain = ctx.createGain();
        osc.connect(gain); gain.connect(ctx.destination);
        osc.type = 'sine';
        osc.frequency.value = 220;
        gain.gain.cancelScheduledValues(0);
        gain.gain.setValueAtTime(0.08, t);
        gain.gain.exponentialRampToValueAtTime(0.001, t + 0.3);
        osc.start(t); osc.stop(t + 0.3);
      } else if (type === 'undo') {
        const osc = ctx.createOscillator();
        const gain = ctx.createGain();
        osc.connect(gain); gain.connect(ctx.destination);
        osc.type = 'sine';
        osc.frequency.cancelScheduledValues(0);
        osc.frequency.setValueAtTime(500, t);
        osc.frequency.exponentialRampToValueAtTime(350, t + 0.15);
        gain.gain.cancelScheduledValues(0);
        gain.gain.setValueAtTime(0.1, t);
        gain.gain.exponentialRampToValueAtTime(0.001, t + 0.15);
        osc.start(t); osc.stop(t + 0.15);
      } else if (type === 'levelComplete') {
        [523.25, 659.25, 783.99, 1046.5].forEach((freq, i) => {
          const osc = ctx.createOscillator();
          const gain = ctx.createGain();
          osc.connect(gain); gain.connect(ctx.destination);
          osc.type = 'sine';
          osc.frequency.value = freq;
          const s = t + i * 0.15;
          gain.gain.cancelScheduledValues(0);
          gain.gain.setValueAtTime(0.12, s);
          gain.gain.exponentialRampToValueAtTime(0.001, s + 0.6);
          osc.start(s); osc.stop(s + 0.6);
        });
      }
    } catch(e) {}
  }

  // Always try to resume first; catches 'suspended' and iOS 'interrupted' states
  if (ctx.state !== 'running') {
    ctx.resume().then(_play).catch(() => {});
  } else {
    _play();
  }
}

// ========== CONFETTI ==========
function spawnConfetti() {
  const container = document.getElementById('confetti');
  container.innerHTML = '';
  const colors = ['#E8A87C','#D4726A','#8B5E83','#C2185B','#F48FB1','#D4A574','#43A047'];
  for (let i = 0; i < 40; i++) {
    const piece = document.createElement('div');
    piece.className = 'confetti-piece';
    piece.style.left = (Math.random()*100) + '%';
    piece.style.top = '-10px';
    piece.style.background = colors[Math.floor(Math.random()*colors.length)];
    piece.style.animationDelay = (Math.random()*0.5) + 's';
    piece.style.width = (6 + Math.random()*8) + 'px';
    piece.style.height = (6 + Math.random()*8) + 'px';
    container.appendChild(piece);
  }
  setTimeout(() => container.innerHTML = '', 2500);
}

// ========== PETALS ==========
function createPetals() {
  const container = document.getElementById('petals');
  const petals = ['๐น','๐ธ','๐ฎ','๐ท','๐ฅ'];
  for (let i = 0; i < 12; i++) {
    const p = document.createElement('div');
    p.className = 'petal';
    p.textContent = petals[Math.floor(Math.random()*petals.length)];
    p.style.left = (Math.random()*100)+'%';
    p.style.animationDuration = (8 + Math.random()*8)+'s';
    p.style.animationDelay = (Math.random()*10)+'s';
    p.style.fontSize = (0.8 + Math.random()*0.8)+'rem';
    container.appendChild(p);
  }
}

// ========== RENDER ==========
function getCounts(level) {
  const items = questions[level].items;
  let counts = { all:items.length, new:0, answered:0, skipped:0, refused:0 };
  items.forEach((_, i) => {
    const state = questionStates[`${level}-${i}`] || 'new';
    counts[state]++;
  });
  return counts;
}

function renderTabs() {
  const container = document.getElementById('levelTabs');
  const levelNames = {1:'ุงูุฃูู',2:'ุงูุซุงูู',3:'ุงูุซุงูุซ',4:'ุงูุฑุงุจุน'};
  container.innerHTML = '';
  for (let l = 1; l <= 4; l++) {
    const counts = getCounts(l);
    const btn = document.createElement('button');
    btn.className = 'level-tab' + (l === currentLevel ? ' active' : '');
    btn.dataset.level = l;
    btn.innerHTML = `ุงููุณุชูู ${levelNames[l]}<span class="tab-count">${counts.answered}/${counts.all}</span>`;
    btn.onclick = () => { currentLevel = l; currentFilter = 'all'; render(); };
    container.appendChild(btn);
  }
}

function renderFilters() {
  const container = document.getElementById('filterBar');
  const counts = getCounts(currentLevel);
  const filters = [
    {key:'all', label:'ุงููู', count:counts.all},
    {key:'new', label:'ุฌุฏูุฏ', count:counts.new},
    {key:'answered', label:'ุงุชุฌุงูุจ', count:counts.answered},
    {key:'skipped', label:'ูุชุฃุฌู', count:counts.skipped},
    {key:'refused', label:'ูุด ุนุงูุฒ', count:counts.refused},
  ];
  container.innerHTML = '';
  filters.forEach(f => {
    const btn = document.createElement('button');
    btn.className = 'filter-btn' + (currentFilter === f.key ? ' active' : '');
    btn.innerHTML = `<span class="count">${f.count}</span>${f.label}`;
    btn.onclick = () => { currentFilter = f.key; render(); };
    container.appendChild(btn);
  });
}

function renderProgress() {
  const counts = getCounts(currentLevel);
  const pct = counts.all > 0 ? ((counts.answered / counts.all) * 100) : 0;
  const fill = document.getElementById('progressFill');
  fill.style.width = pct + '%';
  fill.dataset.level = currentLevel;
  document.getElementById('progressText').textContent = 
    `${counts.answered} ูู ${counts.all} ุงุชุฌุงูุจูุง โ ${Math.round(pct)}%`;
}

function renderCards() {
  const area = document.getElementById('cardArea');
  const level = currentLevel;
  const data = questions[level];
  
  // Header
  let html = `<div class="level-header">
    <div class="lnum">ุงููุณุชูู ${toArabicNum(level)}</div>
    <h2>${data.title}</h2>
    <div class="ldesc">${data.desc}</div>
  </div>`;

  let visibleCount = 0;
  data.items.forEach((q, i) => {
    const key = `${level}-${i}`;
    const state = questionStates[key] || 'new';
    if (currentFilter !== 'all' && state !== currentFilter) return;
    visibleCount++;
    
    const num = toArabicNum(i+1).padStart(2,'ู');
    const stateClass = state !== 'new' ? ` state-${state}` : '';
    
    let badgeHtml = '';
    if (state === 'answered') badgeHtml = '<span class="card-status-badge badge-answered show">โ ุงุชุฌุงูุจ</span>';
    else if (state === 'skipped') badgeHtml = '<span class="card-status-badge badge-skipped show">โญ ูุชุฃุฌู</span>';
    else if (state === 'refused') badgeHtml = '<span class="card-status-badge badge-refused show">โ ูุด ุนุงูุฒ</span>';

    let actionsHtml = '';
    if (state === 'new') {
      actionsHtml = `
        <button class="action-btn btn-answered" onclick="setAnswer('${key}','answered')">โ ุงุชุฌุงูุจ ุนููู</button>
        <button class="action-btn btn-skip" onclick="setAnswer('${key}','skipped')">โญ ุจุนุฏูู</button>
        <button class="action-btn btn-refuse" onclick="setAnswer('${key}','refused')">โ ูุด ุนุงูุฒ</button>`;
    } else {
      actionsHtml = `<button class="action-btn btn-undo" onclick="setAnswer('${key}','new')">โฉ ุฑุฌูุน ุฌุฏูุฏ</button>`;
    }

    html += `
    <div class="card-wrapper" style="animation-delay:${Math.min(visibleCount*0.04, 0.5)}s">
      <div class="card${stateClass}" data-level="${level}" id="card-${key}">
        <div class="card-top">
          <div class="card-qnum">${num}</div>
          ${badgeHtml}
        </div>
        <div class="card-question">${q}</div>
        <div class="card-actions${state !== 'new' ? ' done' : ''}">${actionsHtml}</div>
      </div>
    </div>`;
  });

  if (visibleCount === 0) {
    html += `<div class="empty-state">
      <div class="emoji">๐น</div>
      <div>ูููุด ุฃุณุฆูุฉ ููุง ุฏูููุชู</div>
    </div>`;
  }

  area.innerHTML = html;
}

function render() {
  renderTabs();
  renderFilters();
  renderProgress();
  renderCards();
}

// ========== ACTIONS ==========
function setAnswer(key, state) {
  const oldState = questionStates[key];
  questionStates[key] = state;
  saveStates();
  
  if (state === 'answered') {
    playSound('answered');
    spawnConfetti();
    // Check if level complete
    const level = parseInt(key.split('-')[0]);
    const counts = getCounts(level);
    if (counts.answered === counts.all) {
      setTimeout(() => playSound('levelComplete'), 600);
    }
  } else if (state === 'skipped') {
    playSound('skip');
  } else if (state === 'refused') {
    playSound('refuse');
  } else if (state === 'new') {
    playSound('undo');
  }

  // Animate the card
  const card = document.getElementById(`card-${key}`);
  if (card && state !== 'new') {
    card.style.transition = 'all 0.3s ease';
    card.style.transform = 'scale(0.98)';
    setTimeout(() => {
      render();
      window.scrollBy({top: 0, behavior:'smooth'});
    }, 200);
  } else {
    render();
  }
}

// ========== HELPERS ==========
function toArabicNum(n) {
  const arabicDigits = ['ู','ูก','ูข','ูฃ','ูค','ูฅ','ูฆ','ูง','ูจ','ูฉ'];
  return String(n).replace(/\d/g, d => arabicDigits[d]);
}

// ========== NAV ==========
function startGame() {
  document.getElementById('hero').style.display = 'none';
  document.getElementById('app').classList.add('visible');
  document.getElementById('backBtn').classList.add('visible');
  document.getElementById('soundToggle').style.display = 'flex';
  // Unlock audio on this user gesture (required for iOS Safari)
  iosAudioUnlock();
  render();
  window.scrollTo(0,0);
}

function goHome() {
  document.getElementById('hero').style.display = 'flex';
  document.getElementById('app').classList.remove('visible');
  document.getElementById('backBtn').classList.remove('visible');
  document.getElementById('soundToggle').style.display = 'none';
  window.scrollTo(0,0);
}

function toggleSound() {
  soundEnabled = !soundEnabled;
  const btn = document.getElementById('soundToggle');
  btn.textContent = soundEnabled ? '๐' : '๐';
  btn.classList.toggle('muted', !soundEnabled);
  if (soundEnabled) iosAudioUnlock();
}

// ========== INIT ==========
initStates();
initFirebase();
createPetals();

// Safari suspends AudioContext whenever the app goes to background or tab
// is hidden. Re-resume it as soon as the page becomes visible again.
document.addEventListener('visibilitychange', () => {
  if (document.visibilityState === 'visible' && audioCtx && audioCtx.state === 'suspended') {
    audioCtx.resume().catch(() => {});
  }
});
</script>

</body>
</html>
